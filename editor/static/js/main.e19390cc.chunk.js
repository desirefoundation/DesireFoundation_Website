(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],{135:function(e,t,a){e.exports=a(287)},272:function(e,t,a){},287:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),o=a.n(l),c=a(17),i=a(16),s=(a(140),Object(n.createContext)()),u=Object(n.createContext)(),p=Object(n.createContext)(),m=function(){var e=Object(n.useContext)(s),t=Object(n.useContext)(u),a=Object(n.useContext)(p),l=e.isAuthenticated,o=e.logout,i=r.a.createElement(n.Fragment,null,r.a.createElement(c.b,{className:"nav-item nav-link active",onClick:function(){t.clearCurrent()},to:"/createnewblog"},"Create a New Blog"),r.a.createElement("a",{className:"nav-item nav-link active",onClick:function(){o(),t.clearBlog(),a.clearSac()},href:"#"},"Logout")),m=r.a.createElement(n.Fragment,null,r.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){t.clearCurrent()},to:"/addcategory"},"Add Categories"),r.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){t.clearCurrent()},to:"/Register"},"Add user"),r.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){t.clearCurrent()},to:"/"},"Admin Dashboard"),r.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){a.clearCurrent()},to:"/sac"},"Add Child"),r.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){a.clearCurrent()},to:"/sacs"},"View Children"));return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Desire Foundation - Blog Editor"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},l&&m),r.a.createElement("div",{className:"navbar-nav ml-auto"},l&&i)))},d=a(6),g=a.n(d),b=a(15),E=a(14),f=a(13),v=a(62),h=a(3),_=function(e,t){switch(t.type){case"ADD_BLOG":return Object(h.a)(Object(h.a)({},e),{},{blogs:[].concat(Object(v.a)(e.blogs),[t.payload]),loading:!1});case"DELETE_BLOG":return Object(h.a)(Object(h.a)({},e),{},{blogs:e.blogs.filter((function(e){return e.pk_df_blog_page_id!==t.payload})),loading:!1});case"SET_CURRENT":return Object(h.a)(Object(h.a)({},e),{},{current:t.payload});case"CLEAR_CURRENT":return Object(h.a)(Object(h.a)({},e),{},{current:null});case"UPDATE_BLOG":return Object(h.a)(Object(h.a)({},e),{},{blogs:e.blogs.map((function(e){return e.pk_df_blog_page_id===t.payload.pk_df_blog_page_id?t.payload:e})),loading:!1});case"GET_BLOGS":return e.blogs.splice(0,e.blogs.length),t.payload.forEach((function(t){e.blogs.push(t)})),Object(h.a)(Object(h.a)({},e),{},{loading:!1});case"CLEAR_BLOGS":return Object(h.a)(Object(h.a)({},e),{},{blogs:[],current:null});default:return e}},y=a(11),N=a.n(y),O="http://52.140.97.88:5000",j=function(e){var t=Object(n.useReducer)(_,{blogs:[],current:null}),a=Object(E.a)(t,2),l=a[0],o=a[1],c=function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n,r,l,c,i,s,u,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=t.blog_author,r=t.blog_headline,l=t.blog_subtitle,c=t.category_name,i=t.header_img_path,s=t.user_created,u=t.convertedData,p=t.rawData,n=n.value,e.prev=3,e.next=6,N.a.post("".concat(O,"/api/blog/editor/blogs"),{blog_author:n,blog_headline:r,blog_subtitle:l,category_name:c,header_img_path:i,user_created:s,convertedData:u,rawData:p},a);case 6:o({type:"ADD_BLOG",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat(O,"/api/blog/editor/blogs/adminblogs"));case 3:t=e.sent,console.log("hi"),o({type:"GET_BLOGS",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&"Authentication Token Missing"!==e.t0.response.data&&alert(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat(O,"/api/blog/editor/blogs"));case 3:t=e.sent,o({type:"GET_BLOGS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&"Authentication Token Missing"!==e.t0.response.data&&alert(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("".concat(O,"/api/blog/editor/blogs/").concat(t));case 3:o({type:"DELETE_BLOG",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n,r,l,c,i,s,u,p,m,d,b,E;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},n=t.pk_df_blog_page_id,r=t.is_published,l=t.blog_author,c=t.blog_headline,i=t.blog_subtitle,s=t.category_name,u=t.header_img_path,p=t.user_created,m=t.is_editor_pick,d=t.convertedData,b=t.rawData,e.prev=2,e.next=5,N.a.put("".concat(O,"/api/blog/editor/blogs/").concat(n),{pk_df_blog_page_id:n,blog_author:l,blog_headline:c,is_published:r,blog_subtitle:i,category_name:s,header_img_path:u,user_created:p,is_editor_pick:m,convertedData:d,rawData:b},a);case 5:E=e.sent,o({type:"UPDATE_BLOG",payload:E.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.Provider,{value:{blogs:l.blogs,current:l.current,getAdminBlogs:i,addBlog:c,getBlog:s,clearBlog:function(){o({type:"CLEAR_BLOGS"})},deleteBlog:p,setCurrent:function(e){e.blog_raw=e.blog_raw.substring(1,e.blog_raw.length-1),e.blog_raw=Object(f.convertFromRaw)(JSON.parse(e.blog_raw)),e.editorState=f.EditorState.createWithContent(e.blog_raw),e.blog_author={label:e.user_name,value:e.user_name},o({type:"SET_CURRENT",payload:e})},clearCurrent:function(){o({type:"CLEAR_CURRENT"})},updateBlog:m}},e.children)},w=a(21),C=a(40),x=a.n(C),k=a(41),S=a(61),z=function(){var e=Object(n.useContext)(u),t=Object(n.useContext)(s),a=Object(i.g)(),l=Object(n.useState)({pk_df_blog_page_id:"",blog_author:"",blog_headline:"",blog_subtitle:"",category_name:"My Journey",header_img_path:"",user_created:"",actual_link:"",is_editor_pick:!1,is_published:!1,editorState:f.EditorState.createEmpty(),convertedData:"",blog_raw:""}),o=Object(E.a)(l,2),c=o[0],p=o[1],m=Object(n.useState)([]),d=Object(E.a)(m,2),v=d[0],_=d[1],y=Object(n.useState)([]),j=Object(E.a)(y,2),C=j[0],z=j[1],G=c.blog_headline,A=c.blog_subtitle,D=c.category_name,R=c.header_img_path,L=c.actual_link,T=c.editorState,U=c.blog_author,B=e.addBlog,q=e.updateBlog,M=e.current,P=e.clearCurrent,F=function(){P()};Object(n.useEffect)((function(){p(null!==M?M:{pk_df_blog_page_id:"",blog_author:"",blog_headline:"",blog_subtitle:"",category_name:"My Journey",header_img_path:"",user_created:"",actual_link:"",is_editor_pick:!1,is_published:!1,editorState:f.EditorState.createEmpty(),convertedData:""})}),[e,M]);var I=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(O,"/api/blog/editor/blogs/categories")).then((function(e){var t=[];e.data.forEach((function(e){t.push(e.category_name)})),_(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(O,"/api/blog/editor/username")).then((function(e){var t=[];e.data.forEach((function(e){t.push({label:e.user_name,value:e.user_name})})),z(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){J(),t.loadUser(),I()}),[]);var Z=function(e){var t=e.target,a=t.name,n=t.value;p(Object(h.a)(Object(h.a)({},c),{},Object(w.a)({},a,n)))},Y=r.a.createElement("div",{className:"col"},r.a.createElement(S.a,{placeholder:"Blog Author",value:U,onChange:function(e){p(Object(h.a)(Object(h.a)({},c),{},{blog_author:e}))},options:C}),r.a.createElement("br",null));return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new RegExp(/[-a-zA-Z0-9@:%._~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_.~#?&//=]*)?/gi);if(c.is_published=0,null===M){if(A.length>=100)return void alert("Subtitle must be less than 100 characters");R.match(t)?(c.convertedData=x()(Object(f.convertToRaw)(T.getCurrentContent())),c.rawData=JSON.stringify(Object(f.convertToRaw)(T.getCurrentContent())),"<p></p>"===c.convertedData.trimLeft().trimRight()||""===c.blog_author?alert("pls enter all the required data"):(B(c),F(),a.push("/blogsadmin"))):alert("pls enter a valid header img url")}else{if(A.length>=100)return void alert("Subtitle must be less than 100 characters");R.match(t)?(c.convertedData=x()(Object(f.convertToRaw)(T.getCurrentContent())),c.rawData=JSON.stringify(Object(f.convertToRaw)(T.getCurrentContent())),"<p></p>"===c.convertedData.trimLeft().trimRight()&&c.blog_author?alert("pls enter all the required data"):(q(c),F(),a.push("/blogsadmin"))):alert("pls enter a valid header img url")}},className:"container"},r.a.createElement("br",null),r.a.createElement("h4",null,M?"Edit your Post":"Publish a New Post"),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Title")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"blog_headline",value:G,required:!0,onChange:Z})),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Subtitle")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",name:"blog_subtitle",value:A,required:!0,onChange:Z})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Category")),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-info dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},D),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},v.map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){var a;t.preventDefault(),a=e,p(Object(h.a)(Object(h.a)({},c),{},{category_name:a}))},className:"dropdown-item"},e)}))))))),r.a.createElement("div",{className:"row col-sm-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Enter Google Drive URL")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",name:"header_img_path",onChange:function(e){var t=e.target.value;p(Object(h.a)(Object(h.a)({},c),{},{actual_link:t}));var a=t.split("/");7===a.length?p(Object(h.a)(Object(h.a)({},c),{},{actual_link:"https://drive.google.com/uc?export=view&id=".concat(a[5])})):3===a.length?p(Object(h.a)(Object(h.a)({},c),{},{actual_link:"https://drive.google.com/uc?export=view&id=".concat(t.slice(33))})):p(Object(h.a)(Object(h.a)({},c),{},{actual_link:"Please enter a valid link"}))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Modified Image URL")),r.a.createElement("p",{style:{paddingLeft:"1rem"}},L)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Header Image URL")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",name:"header_img_path",value:R,required:!0,onChange:Z})))),r.a.createElement("div",{className:"row"},!M&&Y),r.a.createElement("div",{className:"editor"},r.a.createElement(k.Editor,{editorState:T,wrapperClassName:"rich-editor demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:function(e){p(Object(h.a)(Object(h.a)({},c),{},{editorState:e}))},required:!0,placeholder:"The message goes here..."})),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:M?"Update Blog":"Add Blog"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))},G=function(e,t){switch(t.type){case"CLEAR_ERRORS":return Object(h.a)(Object(h.a)({},e),{},{error:null});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload),Object(h.a)(Object(h.a)({},e),{},{token:t.payload,isAuthenticated:!0,loading:!1,isAdmin:!1});case"USER_LOADED":return t.payload.user_is_admin&&(e.isAdmin=!0),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload,isAdmin:!1});default:return e}},A=function(e){e?N.a.defaults.headers.common["x-auth-token"]=e:delete N.a.defaults.headers.common["x-auth-token"]},D=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:!1,isAdmin:!1,loading:!0,user:null,error:[]},a=Object(n.useReducer)(G,t),l=Object(E.a)(a,2),o=l[0],c=l[1],i=function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&A(localStorage.token),e.prev=1,e.next=4,N.a.get("".concat(O,"/api/blog/editor/blogs/loaduser"));case 4:t=e.sent,c({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"AUTH_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"content-type":"application/json"}},e.prev=1,e.next=4,N.a.post("".concat(O,"/api/blog/editor/login"),t,a);case 4:n=e.sent,c({type:"LOGIN_SUCCESS",payload:n.data.token}),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"LOGIN_FAIL",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(s.Provider,{value:{token:o.token,isAuthenticated:o.isAuthenticated,loading:o.loading,user:o.user,error:o.error,isAdmin:o.isAdmin,login:u,loadUser:i,logout:function(){return c({type:"LOGOUT"})},clearErrors:function(){return c({type:"CLEAR_ERRORS"})}}},e.children)},R=a(33),L=a(133),T=(a(272),function(){var e=Object(n.useContext)(s),t=Object(i.g)(),a=e.login,l=e.error,o=e.clearErrors,c=e.isAuthenticated;Object(n.useEffect)((function(){c&&t.push("/blogsadmin"),"invalid credentials"===l&&(alert("invalid credentials"),o())}),[l,c,t]);var u=Object(n.useState)({email:"",password:""}),p=Object(E.a)(u,2),m=p[0],d=p[1],g=m.email,b=m.password,f=function(e){d(Object(h.a)(Object(h.a)({},m),{},Object(w.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"container"},r.a.createElement(R.a,{onSubmit:function(e){e.preventDefault(),a({email:g,password:b})}},r.a.createElement("h2",{className:"text-center"},"Login"),r.a.createElement("br",null),r.a.createElement(R.a.Group,{size:"lg",controlId:"email"},r.a.createElement(R.a.Label,null,"Email"),r.a.createElement(R.a.Control,{name:"email",type:"email",className:"form-control","aria-describedby":"emailHelp",value:g,onChange:f,required:!0})),r.a.createElement(R.a.Group,{size:"lg",controlId:"password"},r.a.createElement(R.a.Label,null,"Password"),r.a.createElement(R.a.Control,{type:"password",name:"password",className:"form-control",value:b,onChange:f,required:!0})),r.a.createElement(L.a,{block:!0,size:"lg",type:"submit",className:"btn btn-primary"},"Login"))))}),U=function(){var e=Object(n.useContext)(s),t=Object(i.g)(),a=Object(n.useState)({name:"",email:"",password:"",confirmPassword:"",facebook_username:"",instagram_username:"",linkedin_username:""}),l=Object(E.a)(a,2),o=l[0],c=l[1];Object(n.useEffect)((function(){e.loadUser()}),[]);var u=function(e){c(Object(h.a)(Object(h.a)({},o),{},Object(w.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"container",style:{padding:"4rem 10rem 0rem 10rem"}},r.a.createElement("h2",null,"Register User - Desire Foundation Blog Editor")," ",r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=Object(h.a)({},o);delete a.confirmPassword,o.password===o.confirmPassword?(N.a.post("".concat(O,"/api/blog/editor/register"),a).then((function(e){alert(e.data.message)})).catch((function(e){void 0!==e.response?alert(e.response.data.error):alert("Server Unavailable")})),t.push("/blogsadmin")):alert("Passwords do not match")}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter your name",onChange:u,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email Address"),r.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Enter your Email address",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",placeholder:"Set a Password",minLength:"6",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"confirmPassword",placeholder:"Confirm Password",minLength:"6",required:!0,onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Facebook Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"facebook_username",placeholder:"Enter your facebook username",onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Instagram Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"instagram_username",placeholder:"Enter your instagram username",onChange:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"LinkedIn Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"linkedin_username",placeholder:"Enter your LinkedIn username",onChange:u})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))},B=a(134),q=function(e){var t=e.component,a=Object(B.a)(e,["component"]),l=Object(n.useContext)(s),o=l.isAuthenticated,c=l.loading;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return o||c?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))},M=a(1),P=a.n(M),F=function(e){var t=e.blog,a=Object(n.useContext)(u).setCurrent,l=Object(i.g)(),o=t.blog_headline,c=t.blog_subtitle,s=t.user_name;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{padding:"1rem",fontFamily:"Open Sans, sans-serif"},className:"card bg-light"},r.a.createElement("h3",{style:{fontWeight:700}},o),r.a.createElement("h5",null,c),r.a.createElement("h6",{style:{fontWeight:400}},"By ",s),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){a(t),l.push("/formadmin")}},"Check"))),r.a.createElement("br",null))};F.propType={blog:P.a.object.isRequired};var I=F,J=function(){var e=Object(n.useContext)(s),t=Object(n.useContext)(u),a=t.blogs,l=t.getAdminBlogs,o=t.loading;return Object(n.useEffect)((function(){e.loadUser(),l()}),[]),Object(n.useEffect)((function(){l(),l()}),[a]),r.a.createElement(n.Fragment,null,0===a.length||o?r.a.createElement("div",{style:{margin:"3rem"},className:"alert alert-primary",role:"alert"},"No blogs to review at the moment"):r.a.createElement("div",null,r.a.createElement("br",null),a.map((function(e){return r.a.createElement(I,{key:e.pk_df_blog_page_id,blog:e})}))))},Z=function(){var e=Object(n.useContext)(u),t=Object(n.useContext)(s),a=Object(i.g)(),l=Object(n.useState)({pk_df_blog_page_id:"",blog_author:{label:"Enter name",value:"Enter Name"},blog_headline:"",blog_subtitle:"",category_name:"",header_img_path:"",user_created:"",actual_link:"",is_editor_pick:!1,is_published:!1,editorState:f.EditorState.createEmpty(),convertedData:"",blog_raw:""}),o=Object(E.a)(l,2),c=o[0],p=o[1],m=Object(n.useState)([]),d=Object(E.a)(m,2),v=d[0],_=d[1],y=Object(n.useState)([]),j=Object(E.a)(y,2),C=j[0],z=j[1],G=c.blog_author,A=c.blog_headline,D=c.blog_subtitle,R=c.category_name,L=c.header_img_path,T=c.actual_link,U=c.is_editor_pick,B=c.editorState,q=c.pk_df_blog_page_id,M=e.updateBlog,P=e.current,F=e.clearCurrent,I=e.deleteBlog;Object(n.useEffect)((function(){p(null!==P?P:{pk_df_blog_page_id:"",blog_author:{label:"Enter ",value:"Enter"},blog_headline:"",blog_subtitle:"",category_name:"",header_img_path:"",user_created:"",actual_link:"",is_published:!1,is_editor_pick:!1,editorState:f.EditorState.createEmpty(),convertedData:""})}),[e,P]);var J=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(O,"/api/blog/editor/blogs/categories")).then((function(e){var t=[];e.data.forEach((function(e){t.push(e.category_name)})),_(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(O,"/api/blog/editor/username")).then((function(e){var t=[];e.data.forEach((function(e){t.push({label:e.user_name,value:e.user_name})})),z(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Z(),t.loadUser(),J()}),[]);var Y=function(e){var t=e.target,a=t.name,n=t.value;p(Object(h.a)(Object(h.a)({},c),{},Object(w.a)({},a,n)))},H=function(e){p(Object(h.a)(Object(h.a)({},c),{},{is_editor_pick:e}))},W=r.a.createElement("div",{className:"col"},r.a.createElement(S.a,{value:G,onChange:function(e){p(Object(h.a)(Object(h.a)({},c),{},{blog_author:e}))},options:C,required:!0}),r.a.createElement("br",null));return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new RegExp(/[-a-zA-Z0-9@:%._~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_.~#?&//=]*)?/gi);D.length>=100?alert("Subtitle must be less than 100 characters"):L.match(t)?(c.is_published=1,c.convertedData=x()(Object(f.convertToRaw)(B.getCurrentContent())),c.rawData=JSON.stringify(Object(f.convertToRaw)(B.getCurrentContent())),"<p></p>"===c.convertedData.trimLeft().trimRight()?alert("pls enter all the required data"):(M(c),F(),a.push("/blogsadmin"))):alert("pls enter a valid header img url")},className:"container"},r.a.createElement("br",null),r.a.createElement("h4",null,P?"Edit your Post":"Publish a New Post"),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Title")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"blog_headline",value:A,required:!0,onChange:Y})),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Subtitle")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",name:"blog_subtitle",value:D,required:!0,onChange:Y})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Category")),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-info dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},R),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},v.map((function(e){return r.a.createElement("button",{key:e,onClick:function(t){var a;t.preventDefault(),a=e,p(Object(h.a)(Object(h.a)({},c),{},{category_name:a}))},className:"dropdown-item"},e)})))))),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Editor's Pick ?")),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-info dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},U?"yes":"no"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},r.a.createElement("button",{onClick:function(e){e.preventDefault(),H(!0)},className:"dropdown-item"},"Yes"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),H(!1)},className:"dropdown-item"},"No")))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Enter Google Drive URL")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",name:"header_img_path",onChange:function(e){var t=e.target.value;p(Object(h.a)(Object(h.a)({},c),{},{actual_link:t}));var a=t.split("/");7===a.length?p(Object(h.a)(Object(h.a)({},c),{},{actual_link:"https://drive.google.com/uc?export=view&id=".concat(a[5])})):3===a.length?p(Object(h.a)(Object(h.a)({},c),{},{actual_link:"https://drive.google.com/uc?export=view&id=".concat(t.slice(33))})):p(Object(h.a)(Object(h.a)({},c),{},{actual_link:"Please enter a valid link"}))}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Modified Image URL")),r.a.createElement("p",{style:{paddingLeft:"1rem"}},T)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Header Image URL")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",name:"header_img_path",value:L,required:!0,onChange:Y})))),r.a.createElement("div",{className:"row"},P&&W),r.a.createElement("div",{className:"editor"},r.a.createElement(k.Editor,{editorState:B,wrapperClassName:"rich-editor demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:function(e){p(Object(h.a)(Object(h.a)({},c),{},{editorState:e}))},required:!0,placeholder:"The message goes here..."})),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Publish Blog"}),r.a.createElement("input",{type:"button",className:"btn btn-danger btn-sm float-right",onClick:function(){window.confirm("Delete the blog")&&(I(q),F(),a.push("/adminblogs"))},value:"Delete"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))},Y=function(){var e=Object(n.useContext)(s),t=Object(i.g)(),a=Object(n.useState)({user:"",category_name:""}),l=Object(E.a)(a,2),o=l[0],c=l[1];Object(n.useEffect)((function(){e.loadUser()}),[]);var u=function(){var e=Object(b.a)(g.a.mark((function e(a){var n,r,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n={headers:{"Content-Type":"application/json"}},e.prev=2,r=o.category_name,l=o.user,e.next=6,N.a.post("".concat(O,"/api/blog/editor/blogs/category"),{category_name:r,user:l},n).then((function(e){alert("Category has been added"),t.push("/blogsadmin")}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("form",{style:{padding:"4rem 10rem 0rem 10rem"},onSubmit:u},r.a.createElement("h2",null,"Add Category"),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category"),r.a.createElement("input",{name:"category_name",type:"text",className:"form-control",value:o.category_name,onChange:function(e){c(Object(h.a)(Object(h.a)({},o),{},Object(w.a)({},e.target.name,e.target.value)))},required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Category"))))},H=a(132),W=a.n(H),V=function(){var e=Object(n.useContext)(p),t=Object(n.useContext)(s),a=Object(n.useState)({first_name:"",last_name:"",gender:"Gender",age:"",birthday:"",image_link:"",location:"",father:"",mother:"",priority:"",child_short_story:"",editorState:f.EditorState.createEmpty(),waiting_for_sponsorship:"",family_income:"",hobbies:"",talents:"",spoken_language:"",school:"",medical_emergency:"",is_taken:"",child_story:""}),l=Object(E.a)(a,2),o=l[0],c=l[1],u={first_name:"",last_name:"",gender:"Gender",age:"",birthday:"",image_link:"",location:"",father:"",mother:"",priority:"",child_short_story:"",editorState:f.EditorState.createEmpty(),waiting_for_sponsorship:"",family_income:"",hobbies:"",talents:"",spoken_language:"",school:"",medical_emergency:"",is_taken:"",child_story:""},m=o.first_name,d=o.last_name,g=o.gender,b=o.age,v=o.image_link,_=o.location,y=o.father,N=o.mother,O=o.priority,j=o.child_short_story,C=o.editorState,S=o.waiting_for_sponsorship,z=o.family_income,G=o.hobbies,A=o.talents,D=o.spoken_language,R=o.school,L=o.medical_emergency,T=o.is_taken,U=Object(i.g)(),B=e.addSac,q=e.current,M=e.clearCurrent,P=e.updateSac,F=Object(n.useState)(new Date),I=Object(E.a)(F,2),J=I[0],Z=I[1];Object(n.useEffect)((function(){null!==q?(c(q),Z(new Date(q.birthday)),console.log(J)):(console.log(u),c(u))}),[e,q]),Object(n.useEffect)((function(){t.loadUser()}),[]);var Y=function(e){var t=e.target,a=t.name,n=t.value;c(Object(h.a)(Object(h.a)({},o),{},Object(w.a)({},a,n)))},H=function(){var e=new RegExp(/[-a-zA-Z0-9@:%._~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_.~#?&//=]*)?/gi),t=v.split("/");return console.log(v),7===t.length&&v.match(e)?(c(Object(h.a)(Object(h.a)({},o),{},{image_link:"https://drive.google.com/uc?export=view&id=".concat(t[5])})),!0):3===t.length&&v.match(e)?(c(Object(h.a)(Object(h.a)({},o),{},{image_link:"https://drive.google.com/uc?export=view&id=".concat(v.slice(33))})),!0):(alert("Please enter a valid link"),!1)},V=function(){return"<p></p>"!==x()(Object(f.convertToRaw)(C.getCurrentContent())).trimLeft().trimRight()||(alert("pls enter the child story"),!1)};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(o.birthday),"Yes"===o.waiting_for_sponsorship?o.waiting_for_sponsorship=1:o.waiting_for_sponsorship=0,null===q?(console.log(V()),console.log(H()),V()&&H()&&(o.child_story=JSON.stringify(Object(f.convertToRaw)(C.getCurrentContent())),B(o),M(),U.push("/sacs"))):V()&&H()&&(o.child_story=JSON.stringify(Object(f.convertToRaw)(C.getCurrentContent())),console.log(JSON.stringify(o)),P(o),M(),U.push("/sacs"))},className:"container"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",null,"Add a new child"),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"First Name")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",first_name:!0,name:"first_name",value:m,onChange:Y,required:!0})),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Last Name")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"last_name",value:d,onChange:Y,required:!0}))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-lg btn-info dropdown-toggle",type:"button",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},g),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button",name:"gender",value:"Male",onClick:function(e){e.preventDefault(),Y(e)}},"Male"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"gender",value:"Female",onClick:function(e){e.preventDefault(),Y(e)}},"Female"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"gender",value:"Other",onClick:function(e){e.preventDefault(),Y(e)}},"Other"))),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Age")),r.a.createElement("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"age",value:b,onChange:Y,required:!0})),r.a.createElement("div",{className:"col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Date Of Birth")),r.a.createElement(W.a,{onChange:function(e){Z(e),console.log(e),c(Object(h.a)(Object(h.a)({},o),{},{birthday:e.toString()})),console.log(o)},value:J}))),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Location")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"location",value:_,onChange:Y,required:!0})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Father's Name")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"father",value:y,onChange:Y,required:!0})),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Mother's Name")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"mother",value:N,onChange:Y,required:!0}))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Waiting For Sponsorship")),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-lg btn-info dropdown-toggle",type:"button",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},S),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button",name:"waiting_for_sponsorship",value:"Yes",onClick:function(e){e.preventDefault(),Y(e)}},"Yes"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"waiting_for_sponsorship",value:"No",onClick:function(e){e.preventDefault(),Y(e)}},"No")))),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Family Income p/a")),r.a.createElement("input",{type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"family_income",value:z,onChange:Y,required:!0})),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"School")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"school",value:R,onChange:Y,required:!0}))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Language")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"spoken_language",value:D,onChange:Y,required:!0})),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Talents")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"talents",value:A,onChange:Y,required:!0}))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Hobbies")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"hobbies",value:G,onChange:Y,required:!0})),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Medical Emergency")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"medical_emergency",value:L,onChange:Y,required:!0}))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Is Taken")),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-lg btn-info dropdown-toggle",type:"button",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},T),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button",name:"is_taken",value:"Yes",onClick:function(e){e.preventDefault(),Y(e)}},"Yes"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"is_taken",value:"No",onClick:function(e){e.preventDefault(),Y(e)}},"No")))),r.a.createElement("div",{className:" col input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"priority")),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-lg btn-info dropdown-toggle",type:"button",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},O),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button",name:"priority",value:"1",onClick:function(e){e.preventDefault(),Y(e)}},"1"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"priority",value:"2",onClick:function(e){e.preventDefault(),Y(e)}},"2"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"priority",value:"3",onClick:function(e){e.preventDefault(),Y(e)}},"3"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"priority",value:"4",onClick:function(e){e.preventDefault(),Y(e)}},"4"),r.a.createElement("button",{className:"dropdown-item",type:"button",name:"priority",value:"5",onClick:function(e){e.preventDefault(),Y(e)}},"5"))))),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Enter Google Drive link")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"image_link",value:v,onChange:Y,required:!0})),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},"Child Story Short")),r.a.createElement("input",{type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"child_short_story",value:j,onChange:Y,required:!0})),r.a.createElement("br",null),r.a.createElement("div",{className:"editor"},r.a.createElement(k.Editor,{editorState:C,wrapperClassName:"rich-editor demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:function(e){c(Object(h.a)(Object(h.a)({},o),{},{editorState:e}))},required:!0,placeholder:"The message goes here..."})),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:q?"Update Sac":"Add Sac"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))},K=function(e,t){switch(t.type){case"ADD_SAC":return Object(h.a)(Object(h.a)({},e),{},{sacs:[t.payload].concat(Object(v.a)(e.sacs)),loading:!1});case"GET_SAC":return e.sacs.splice(0,e.sacs.length),t.payload.forEach((function(t){e.sacs.push(t)})),Object(h.a)(Object(h.a)({},e),{},{loading:!1});case"DELETE_SAC":return Object(h.a)(Object(h.a)({},e),{},{sacs:e.sacs.filter((function(e){return e.pk_child_id!==t.payload})),loading:!1});case"UPDATE_SAC":return console.log(t.payload),Object(h.a)(Object(h.a)({},e),{},{sacs:e.sacs.map((function(e){return e.pk_child_id===t.payload.pk_child_id?t.payload:e})),loading:!1});case"SET_CURRENT":return Object(h.a)(Object(h.a)({},e),{},{current:t.payload});case"CLEAR_CURRENT":return Object(h.a)(Object(h.a)({},e),{},{current:null});case"CLEAR_SACS":return Object(h.a)(Object(h.a)({},e),{},{sacs:[],current:null});default:return e}},Q=function(e){var t=Object(n.useReducer)(K,{sacs:[],current:null}),a=Object(E.a)(t,2),l=a[0],o=a[1],c=function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,N.a.post("".concat(O,"/api/child"),t,a);case 4:o({type:"ADD_SAC",payload:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat(O,"/api/child"));case 3:t=e.sent,o({type:"GET_SAC",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&"Authentication Token Missing"!==e.t0.response.data&&alert(JSON.stringify(e.t0.response.data.err));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("".concat(O,"/api/child/").concat(t));case 3:o({type:"DELETE_SAC",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,N.a.put("".concat(O,"/api/child/").concat(t.pk_child_id),t,a);case 4:n=e.sent,o({type:"UPDATE_SAC",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{sacs:l.sacs,current:l.current,addSac:c,getSacs:i,deleteSac:s,setCurrent:function(e){e.child_story=e.child_story.substring(1,e.child_story.length-1),e.child_story=Object(f.convertFromRaw)(JSON.parse(e.child_story)),e.editorState=f.EditorState.createWithContent(e.child_story),o({type:"SET_CURRENT",payload:e})},clearSac:function(){o({type:"CLEAR_SACS"})},clearCurrent:function(){o({type:"CLEAR_CURRENT"})},updateSac:u}},e.children)},X=function(e){var t=e.sac,a=Object(n.useContext)(p),l=Object(i.g)(),o=t.pk_child_id,c=t.first_name,s=t.last_name,u=t.child_short_story;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{padding:"1rem",fontFamily:"Open Sans, sans-serif"},className:"card bg-light"},r.a.createElement("h3",{style:{fontWeight:700}},c," ",s),r.a.createElement("h6",null,u),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-dark btn-sm",onClick:function(){a.setCurrent(t),l.push("/sac")}},"Edit"),r.a.createElement("button",{className:"btn btn-danger btn-sm float-right",onClick:function(){window.confirm("Delete the blog")&&(console.log(o),a.deleteSac(o),a.clearCurrent())}},"Delete"))),r.a.createElement("br",null))};X.propType={sac:P.a.object.isRequired};var $=X,ee=function(){var e=Object(n.useContext)(s),t=Object(n.useContext)(p),a=t.sacs,l=t.getSacs,o=t.loading;return Object(n.useEffect)((function(){e.loadUser(),l()}),[]),Object(n.useEffect)((function(){l()}),[a]),r.a.createElement(n.Fragment,null,0===a.length||o?r.a.createElement("div",{style:{margin:"3rem"},class:"alert alert-primary",role:"alert"},"You have not added any children yet"):r.a.createElement("div",null,r.a.createElement("br",null),a.map((function(e){return r.a.createElement($,{key:e.pk_child_id,sac:e})}))))};localStorage.token&&A(localStorage.token);var te=function(){return r.a.createElement(D,null,r.a.createElement(j,null,r.a.createElement(Q,null,r.a.createElement(c.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(m,null),r.a.createElement("div",{className:"container"},r.a.createElement(i.d,null,r.a.createElement(q,{exact:!0,path:"/addcategory",component:Y}),r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(i.a,{to:"/login"})),r.a.createElement(i.b,{exact:!0,path:"/register",component:U}),r.a.createElement(q,{exact:!0,path:"/blogsadmin",component:J}),r.a.createElement(q,{exact:!0,path:"/createnewblog",component:z}),r.a.createElement(q,{exact:!0,path:"/formadmin",component:Z}),r.a.createElement(q,{exact:!0,path:"/sac",component:V}),r.a.createElement(q,{exact:!0,path:"/sacs",component:ee}),r.a.createElement(i.b,{exact:!0,path:"/login",component:T}))))))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.e19390cc.chunk.js.map